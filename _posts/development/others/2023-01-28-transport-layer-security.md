---
title: "μ „μ†΅ κ³„μΈµ λ³΄μ• SSL/TLS"
toc: true
toc_sticky: true
categories: ["Develop"]
---

λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ λ•, μ•”νΈν™” ν•λ” μΌλ°μ μΈ λ°©λ²•μ— λ€ν•΄. κ³Όκ±°μ—λ” **SSL**(Secure Sockets Layer)λΌλ” μ΄λ¦„μΌλ΅ λ¶λ Έμ.

λ°μ΄ν„° μ „μ†΅μ μ•”νΈν™”λ” μ•„λμ™€ κ°™μ€ μμ„λ΅ λ°μ „ν•λ‹¤.

1. ν‰λ¬ΈμΌλ΅ λ°μ΄ν„° μ£Όκ³  λ°›κΈ°
2. μ•”νΈν™” ν•΄μ„ μ£Όκ³  λ°›κΈ°
  - λ™μΌν• μ•”νΈν‚¤(encryption key)λ¥Ό μ‚¬μ©ν•κΈ°
  - Q. μ•”νΈν™” ν‚¤λ¥Ό μ–΄λ–»κ² μ „λ‹¬ν•  κ²ƒμΈκ°€?
3. λΉ„λ€μΉ­ν‚¤(κ³µκ°ν‚¤/κ°μΈν‚¤)λ¥Ό ν†µν•΄ μ£Όκ³  λ°›κΈ°
  - κ°μΈν‚¤(private key)κ°€ μλ” μ„λ²„λ§ ν‰λ¬Έ λ‚΄μ©μ„ μ• μ μλ‹¤.
  - Q. ν†µμ‹  ν•λ” λ€μƒμΈ μ„λ²„λ” λ―Ώμ„λ§ ν•κ°€?
4. μΈμ¦μ„(certificate)λ¥Ό ν•¨κ» μ „μ†΅ν•κΈ°
  - CA(Certificate Authority, μΈμ¦ κΈ°κ΄€)λ¥Ό ν†µν•΄ μ‹ μ©μ„ ν™•λ³΄ν•λ‹¤.

<hr/>

# ν‰λ¬ΈμΌλ΅ λ°μ΄ν„° μ£Όκ³  λ°›κΈ°

μ μ €μ™€ μ„λ²„κ°€ λ°μ΄ν„°λ¥Ό ν‰λ¬ΈμΌλ΅ μ£Όκ³  λ°›λ”λ‹¤λ©΄, ν†µμ‹ μ΄ κ°μ²­ λμ—μ„ λ• μ£Όκ³  λ°›λ” μ •λ³΄κ°€ κ·Έλ€λ΅ λ³΄μΈλ‹¤. πµ

# μ•”νΈν™” ν•΄μ„ μ£Όκ³  λ°›κΈ°

μ μ €μ™€ μ„λ²„λ” λ―Έλ¦¬ μ •ν•΄λ‘” **μ•”νΈν‚¤(encryption key)**λ¥Ό μ‚¬μ©ν•΄μ„ μ •λ³΄λ¥Ό μ•”νΈν™” ν•λ‹¤.
μ•”νΈν™”λ λ°μ΄ν„°λ” ν†µμ‹ μ΄ κ°μ²­λμ–΄λ„ μ •λ³΄λ¥Ό μ• μ μ—†λ‹¤.

μ μ €μ™€ μ„λ²„κ°€ μ¤ν”„λΌμΈμ—μ„ λ―Έλ¦¬ μ•„λ” μ‚¬μ΄λΌλ©΄, μ•”νΈν‚¤λ¥Ό λ―Έλ¦¬ μ •ν•΄λ‘ μ μμ„ κ²ƒμ΄λ‹¤.
κ·Έλ¬λ‚ 99.9%μ μ μ €-μ„λ²„ μμ€ μ„λ΅ μ²μ λ³Έλ‹¤. μ¦‰, λ‘ μ‚¬μ΄μ— λ―Έλ¦¬ μ •ν•΄λ‘” μ•”νΈν‚¤κ°€ μ΅΄μ¬ν•  μ μ—†λ‹¤!

λ§μ•½ ν†µμ‹  μ΄κΈ°μ— μ•”νΈν‚¤λ¥Ό μΈν„°λ„·μ„ ν†µν•΄ μ£Όκ³  λ°›λ”λ‹¤λ©΄, ν†µμ‹  κ°μ²­μ„ ν†µν•΄ μ•”νΈν‚¤κ°€ λ…Έμ¶λ  μ μλ‹¤. π¥· μ΄λ¬λ©΄ ν—›μκ³ λ‹¤!

# λΉ„λ€μΉ­ν‚¤λ¥Ό ν†µν•΄ μ£Όκ³  λ°›κΈ°

μ„λ²„λ” **κ°μΈν‚¤(private key)**μ™€ **κ³µκ°ν‚¤(public key)**λ¥Ό λ§λ“ λ‹¤.
ν†µμ‹ μ„ μ¤€λΉ„ν•  λ•, <span class="red">**μ„λ²„λ” μ μ €μ—κ² μ„λ²„ κ³µκ°ν‚¤λ¥Ό λ³΄λ‚Έλ‹¤.**</span> μ μ €λ” μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν‚¤λ¥Ό μ•”νΈν™” ν•΄μ„ λ³΄λ‚Έλ‹¤.

λΉ„λ€μΉ­ν‚¤λ΅ μ•”νΈν™” λμ—μΌλ―€λ΅ μ μ €κ°€ μ„λ²„ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν• κ°’μ€ <span class="red">**μ„λ²„ κ°μΈν‚¤κ°€ μλ” μ„λ²„ μμ‹ λ§ ν•΄λ…ν•  μ μλ‹¤.**</span>

μ΄μ  ν•΄λ…ν• μ•”νΈν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•μ—¬ μ„λ΅ ν†µμ‹  ν•λ‹¤.

κ·Έλ°λ°, ν•΄μ»¤κ°€ νΈλν”½μ„ μ΅°μ •ν•΄μ„ μ„λ²„ μμ²΄λ¥Ό μ‚¬μΉ­ ν•λ‹¤λ©΄? π¥· κ·Έλ¬λ©΄ μ μ €κ°€ μ‚¬μΉ­ν• μ„λ²„λ¥Ό λ―Ώκ³ , μ‚¬μΉ­ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν‚¤λ¥Ό μ•”νΈν™”ν•΄μ„ μ „λ‹¬ν•κ² λλ‹¤. κ·Έλ¬λ©΄ μ‚¬μΉ­ν• μ„λ²„κ°€ μ‚¬μΉ­ μ„λ²„μ κ°μΈν‚¤λ΅ μ•”νΈν‚¤λ¥Ό ν•΄λ…ν•  μ μκ² λλ‹¤!

# SSL μΈμ¦μ„λ΅ μμ‹ μ„ μ¦λ…ν•κΈ°

ν†µμ‹ μ„ μ‹μ‘ν•  λ•, μ„λ²„λ” **"SSL Certificate"**λ¥Ό μ μ €μ—κ² λ³΄λ‚΄μ–΄ μμ‹ μ΄ μ§„μ§ μ„λ²„μ„μ„ μ¦λ…ν•λ‹¤.

μ μ €λ” μ„λ²„ μΈμ¦μ„λ¥Ό λ³΄κ³ , ν†µμ‹ ν•λ” μ„λ²„κ°€ μ‚¬μΉ­ μ„λ²„κ°€ μ•„λ‹ μ‹¤μ  μ„λ²„μΈμ§€ ν™•μΈν•λ‹¤.
μ‹¤μ  μ„λ²„μΈμ§€ ν™•μΈ ν–λ‹¤λ©΄, λΉ„λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ λ³΄μ• μ—°κ²°μ„ μλ¦½ν•κ³  ν†µμ‹ ν•λ‹¤.

## μ μ €λ” μ„λ²„ μΈμ¦μ„λ¥Ό μ–΄λ–»κ² κ²€μ¦ν•λ”κ°€? feat. PKI

μ„λ²„κ°€ SSL μΈμ¦μ„λ¥Ό μ μ €μ—κ² λ³΄λƒ…λ‹λ‹¤. κ·Έλ¬λ©΄ μ μ €λ” μΈμ¦μ„μ λ‚΄μ©μ—μ„ μ•„λμ 3λ‹¨κ³„λ¥Ό ν™•μΈν•μ—¬ μ‹¤μ  μ„λ²„κ°€ λ³΄λ‚Έ μΈμ¦μ„μΈμ§€ ν™•μΈ ν•©λ‹λ‹¤.

μμ„λ” μ²΄ν¬ν•κΈ° μ‰¬μ΄ κ²ƒλ¶€ν„° μ κ°€ μ¬λ°°μ—΄ ν–μµλ‹λ‹¤. μ‹¤μ  κ²€μ¦ μμ„λ” λ‹¤λ¥Ό μ μμµλ‹λ‹¤.

1. μ ν¨ κΈ°κ°„ ν™•μΈ
   1. μ „λ‹¬ λ°›μ€ μΈμ¦μ„κ°€ ν„μ¬ λ‚ μ§ κΈ°μ¤€μΌλ΅ λ§λ£λμ§€ μ•μ€ κ²ƒμΈμ§€ μ²΄ν¬ν•©λ‹λ‹¤.
2. λ„λ©”μΈ μ΄λ¦„ μΌμΉ ν™•μΈ
   1. μΈμ¦μ„μ— μλ” λ„λ©”μΈ μ΄λ¦„(`CN` λλ” `SAN` ν•„λ“)μ΄ μ‹¤μ  μ ‘μ†ν• URLκ³Ό μΌμΉν•λ”μ§€ μ²΄ν¬ν•©λ‹λ‹¤.
3. CA(μΈμ¦κΈ°κ΄€)μ μ„λ… ν™•μΈ
   1. μ μ €λ” μΈμ¦μ„μ λ””μ§€ν„Έ μ„λ…(signature)μ„ ν™•μΈν•μ—¬ μΈμ¦μ„κ°€ μ‹ λΆ°ν•  μ μλ” CAμ—μ„ λ°κΈ‰ν• κ²ƒμΈμ§€ ν™•μΈν•©λ‹λ‹¤. "[μ„λ²„ μΈμ¦μ„μ κ²€μ¦](#μ„λ²„-μΈμ¦μ„μ-κ²€μ¦)" λ¬Έλ‹¨μ—μ„ μμ„Έν λ‹¤λ£Ήλ‹λ‹¤.
   2. μ μ €λ” μ‹ λΆ°ν•λ” CAμ κ³µκ°ν‚¤ λ©λ΅μ„ λ‚΄μ¥ν•κ³  μμ–΄μ„ μ΄λ¥Ό μ΄μ©ν•΄ μ„λ…μ„ κ²€μ¦ ν•©λ‹λ‹¤.

## μ„λ²„ μΈμ¦μ„μ™€ CA

**CA(Certificate Authority)**λ” μ‹ λΆ°ν•  λ§ν• μΈμ¦ κΈ°κ΄€μΌλ΅, μ„λ²„ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄μ¤€λ‹¤. μ„λ²„ μΈμ¦μ„μ—λ” μ•„λμ λ‚΄μ©μ΄ λ“¤μ–΄μλ‹¤.

- μΈμ¦μ„ μ†μ μ μ΄λ¦„
  - Common Name(CN)
- μΈμ¦μ„ μ†μ μμ κ³µκ°ν‚¤
  - λ‹Ήμ—°ν μ†μ μμ κ°μΈν‚¤λ” λ…Έμ¶λμ§€ μ•λ”λ‹¤!
- μΈμ¦μ„μ μ ν¨κΈ°κ°„
- <span class="red">**CAμ λ””μ§€ν„Έ μ„λ…(signature)**</span>
  - μ†μ μμ κ³µκ°ν‚¤λ¥Ό CAμ λΉ„λ°€ν‚¤λ΅ μ•”νΈν™”
  - **ν•΄μ»¤κ°€ μ λ€ μ„μ΅°ν•  μ μ—†μ!**
  - μ΄ν›„ κ²€μ¦ κ³Όμ •μ—μ„ λΈλΌμ°μ €μ— λ‚΄μ¥λ CAμ κ³µκ°ν‚¤λ΅ ν•΄λ…ν•μ—¬ μ‚¬μ©ν•©λ‹λ‹¤.
- CA μ„λ…μ ν•΄μ‹± μ•κ³ λ¦¬μ¦
  - ex. SHA-256

![](/images/development/github-ssl-cert-general.png){: .align-center style="max-width: 400px"}
κΉƒν—™ λΈ”λ΅κ·Έμ—μ„ μ‚¬μ©ν•κ³  μλ” SSL μΈμ¦μ„
{: .small .gray .text-center }

μ΄ λ‚΄μ©μ€ CAμ κ°μΈν‚¤λ΅ μ•”νΈν™” λμ–΄ μ„λ²„μ—μ„ νμΌλ΅ λ³΄κ΄€ν–λ‹¤κ°€ μ μ €μ™€ ν†µμ‹ ν•  λ• μ‚¬μ©ν•λ‹¤.

## μ„λ²„ μΈμ¦μ„μ κ²€μ¦

![](/images/development/github-ssl-cert-detail.png){: .align-center style="max-width: 400px"}
κΉƒν—™ λΈ”λ΅κ·Έμ—μ„ μ‚¬μ©ν•κ³  μλ” SSL μΈμ¦μ„ (Detail)<br/>signature κ°’μ€ HEX κ°’μΌλ΅ μΈμ½”λ”© λμ–΄ μμµλ‹λ‹¤.
{: .small .gray .text-center }

μ μ €λ” μ„λ²„μ μΈμ¦μ„λ¥Ό λ°›μ•λ‹¤. μ μ €λ” μ„λ²„ μΈμ¦μ„μ— λ‹΄κΈ΄ **CAμ μ„λ…(signature)μ„ CAμ κ³µκ°ν‚¤λ΅ λ³µνΈν™”** ν•λ‹¤. CAμ κ³µκ°ν‚¤λ” λΈλΌμ°μ €μ— λ‚΄μ¥λμ–΄ μλ‹¤.

```py
ssl_cert = GetSSLCert()

CA_signature = ssl_cert.GetCASignature()  # HEX encoded
CA_public_key = GetCAPublicKeyFromBrowser()
hash_from_CA = do_decrypt(CA_signature, CA_public_key)

server_public_key = ssl_cert.GetServerPublicKey()
CA_hash_algorithm = ssl_cert.GetCAHashAlgo() # SHA-256
hashed_server_pk = do_hashing(server_public_key, CA_hash_algorithm)

if hash_from_CA == hashed_server_pk:
  print("Truth Certificate!")
else:
  print("Hacker!!")
```

### μ‚¬μΉ­λ μ„λ²„ κ³µκ°ν‚¤λ¥Ό μΌλ‹¤λ©΄?

ν•΄μ»¤κ°€ μΈμ¦μ„μ— ν μ§‘μ„ λƒλ‹¤κ³  μƒκ°ν•΄λ³΄μ.

ν•΄μ‹±μ μ›λ¦¬μ— μν•΄ ν•΄μ‹±ν‚¤κ°€ λ‹¤λ¥΄λ©΄, ν•΄μ‹± κ°’μ΄ λ‹¤λ¥΄κ² λ‚μ¨λ‹¤. μ¦‰, μ¬λ°”λ¥Έ μ„λ²„ κ³µκ°ν‚¤κ°€ μ ν€μμ§€ μ•μΌλ©΄, μ„λ…μ„ λ³µνΈν™”ν• `hash_from_CA`μ κ°’κ³Ό λ§μ§€ μ•κ² λλ‹¤.

μ •λ§λ΅ μ‚¬μΉ­ν•κ³  μ‹¶λ‹¤λ©΄, `do_hashing()`μ κ°’μ΄ `hashed_server_pk`κ°€ λλ”, μ‹¤μ  μ„λ²„ κ³µκ°ν‚¤μ™€λ” λ‹¤λ¥Έ, κ³µκ°ν‚¤-λΉ„λ°€ν‚¤ μμ„ μ°Ύμ•„μ•Ό ν•λ‹¤. κ·Έλ¬λ‚ μ΄κ²ƒμ€ λ¶κ°€λ¥ν•λ‹¤.

### μ‚¬μΉ­λ μ„λ…μ„ μΌλ‹¤λ©΄?

CA κ³µκ°ν‚¤λ” λ„κµ¬λ‚ λ‹¤ μ•κ³  μμΌλ‹, μ‚¬μΉ­λ μ„λ…λ„ λ³µνΈν™”ν•  μλ” μλ‹¤. κ·Έλ¬λ‚ λ³µνΈν™”λ κ°’μ΄ μ‹¤μ  κ³µκ°ν‚¤μ ν•΄μ‹± κ°’ `hashed_server_pk`μ™€ λ§μ§€ μ•λ”λ‹¤.

μ •λ§λ΅ μ‚¬μΉ­ν•κ³  μ‹¶λ‹¤λ©΄, `do_decrypt()`μ κ°’μ΄ `hash_from_CA`μ΄ λλ” μ‹¤μ  CA μ„λ…κ³Ό λ‹¤λ¥Έ μ„λ…κ°’μ„ μ°Ύμ•„μ•Ό ν•λ‹¤. κ·Έλ¬λ‚ μ΄κ²ƒμ€ λ¶κ°€λ¥ν•λ‹¤.

### μ„λ²„ μΈμ¦μ„λ¥Ό κ·Έλ€λ΅ μ“΄λ‹¤λ©΄?

"μ—λΌ λ¨λ¥΄κ² λ‹¤!"ν•κ³  μ„λ²„ κ³µκ°ν‚¤λ„ CA μ„λ…λ„ μ„μ΅° ν•  μ μ—†μμ„ κΉ¨λ‹¬μ€ ν•΄μ»¤λ” μ¬λ°”λ¥Έ μ„λ²„ μΈμ¦μ„λ¥Ό κ·Έλ€λ΅ μ‚¬μΉ­ μ„λ²„μ—μ„ κ·Έλ€λ΅ μ“°κΈ°λ΅ λ§μ λ¨Ήμ—λ‹¤.

κ·Έλ¬λ‚ μ΄ λ°©μ‹μΌλ΅ μ μ €μ CA κ²€μ¦μ€ ν†µκ³Όν•΄λ„, μ‹¤μ  μ„λ²„ κ³µκ°ν‚¤μ— λ€μ‘λλ” μ‹¤μ  μ„λ²„ λΉ„λ°€ν‚¤λ¥Ό λ¨λ¥΄κΈ° λ•λ¬Έμ— μ μ €κ°€ λ³΄λ‚Έ μ•”νΈν‚¤λ¥Ό μ λ€λ΅ λ³µνΈν™” ν•  μκ°€ μ—†λ‹¤.

### κ²°λ΅ : μ‚¬μΉ­μ€ λ¶κ°€λ¥ν•λ‹¤

κ²°κµ­ (1) ν•΄μ‹± μ•κ³ λ¦¬μ¦μ λ‹¨λ°©ν–¥ μ•”νΈν™”, κ·Έλ¦¬κ³  (2) CA λΉ„λ°€ν‚¤λ¥Ό μ• μ μ—†λ‹¤λ” μ  λ•λ¬Έμ— ν•΄μ»¤λ” κ³µκ°ν‚¤μ™€ CA μ„λ… μ–΄λ–¤ κ²ƒλ„ ν μ§‘μ„ λ‚Ό μ μ—†λ‹¤.

# λ§Ίμλ§

SSL/TLS μ•”νΈν™”λ” κ°λ°ν•λ©΄μ„ μ •λ§ κΈ°λ³Έμ μΌλ΅ μ‚¬μ©ν•λ” κ²ƒμ„μ—λ„ λ¶κµ¬ν•κ³ , μ‹κ°„μ΄ μ§€λ‚λ©΄ μ›λ¦¬λ¥Ό κΉλ¨Ήκ³  λ‹¤μ‹ κ³µλ¶€ν•κ² λλ” κ²ƒ κ°™μµλ‹λ‹¤ γ…‹γ…‹

μμ „μ— CKA μ‹ν—μ„ μ¤€λΉ„ν•  λ•, μ΄ λ¶€λ¶„ λ•λ¬Έμ— λ¨Έλ¦¬κ°€ μ—„μ²­ μ•„ν λ κΈ°μ–µμ΄ μλ”λ°, μ΄λ²μ— CCDAK μ‹ν—μ„ μ¤€λΉ„μ™€ νμ‚¬μ—μ„ Kafka ν΄λ¬μ¤ν„°μ μΈμ¦μ„λ¥Ό κµ¬μ¶•ν•λ©΄μ„ λ‹¤μ‹ μ΄ λ¶€λ¶„μ„ λ³µμµν•κ³  μμµλ‹λ‹¤... γ…‹γ…‹

μ λ¨λ¥΄λ”κ² μμ„ λ•, λ‹¤μ‹ μ΄μ‹¬μΌλ΅ λμ•„κ°€μ„ λ³΄λ©΄ λλ‹κΉμ”!! γ…γ… μ¤λλ„ μ•„μΆμ£!!

<br/>

ν›„μ† κΈ€λ΅ `openssl` λ„κµ¬λ¥Ό μ‚¬μ©ν•΄μ„ SSL/TLSλ¥Ό μ„Έν…ν•λ” λ°©λ²•μ— λ€ν•΄ μ •λ¦¬ν•΄λ³΄μ•μµλ‹λ‹¤ γ…γ…

β΅οΈ [Hello, OpenSSL!](/2025/07/05/hello-openssl/)
